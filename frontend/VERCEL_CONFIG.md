# Vercel 部署配置说明

## 问题原因

前端页面显示空白或数据缺失，通常是因为：

1. **API 配置问题**：前端使用相对路径 `/api`，但在生产环境中无法连接到后端服务器
2. **后端服务未运行**：如果没有部署后端服务，API 请求会失败
3. **环境变量未配置**：生产环境需要配置后端 API 地址

## 解决方案

### 方案一：配置后端 API 地址（推荐）

如果已有后端服务运行：

1. 登录 [Vercel Dashboard](https://vercel.com/dashboard)
2. 进入项目设置 → **Settings** → **Environment Variables**
3. 添加以下环境变量：

```
VITE_API_BASE_URL=https://your-backend-url.com
VITE_WS_BASE_URL=wss://your-backend-url.com  (可选)
```

4. 重新部署项目

### 方案二：使用模拟数据（临时方案）

如果暂时没有后端服务，代码已经添加了模拟数据后备方案。当 API 连接失败时，会自动使用模拟数据，确保页面正常显示。

## 当前修改

1. ✅ **API 配置**：支持通过环境变量 `VITE_API_BASE_URL` 配置后端地址
2. ✅ **WebSocket 配置**：支持通过环境变量 `VITE_WS_BASE_URL` 配置 WebSocket 地址
3. ✅ **错误处理**：添加了完善的错误处理和模拟数据后备方案
4. ✅ **自动降级**：当 API 失败时，自动使用模拟数据确保页面正常显示

## 验证方法

1. 打开浏览器开发者工具（F12）
2. 查看 Console 标签页：
   - 如果有 "API 连接失败，使用模拟数据" 的警告，说明正在使用模拟数据
   - 如果有 API 请求错误，说明后端地址配置不正确
3. 查看 Network 标签页：
   - 检查 `/api/*` 请求是否成功
   - 如果返回 404，说明后端地址需要配置

## 下一步

1. 如果已有后端服务，按照"方案一"配置环境变量
2. 如果没有后端服务，页面会使用模拟数据，可以先查看效果
3. 部署后端服务后，再配置环境变量连接到真实后端

